# Migration `20200711164901-init`

This migration has been generated by softmarshmallow at 7/11/2020, 4:49:01 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."Dictionary" DROP CONSTRAINT "Dictionary_authorId_fkey"

ALTER TABLE "public"."Profile" DROP CONSTRAINT "Profile_userId_fkey"

ALTER TABLE "public"."UserWordNotation" DROP CONSTRAINT "UserWordNotation_userUid_fkey"

ALTER TABLE "public"."Dictionary" ALTER COLUMN "authorId" SET DATA TYPE text ;

ALTER TABLE "public"."Profile" ALTER COLUMN "userId" SET DATA TYPE text ;

ALTER TABLE "public"."User" DROP CONSTRAINT "User_pkey",
ALTER COLUMN "uid" SET DATA TYPE text ,
ADD PRIMARY KEY ("uid");

ALTER TABLE "public"."UserWordNotation" ALTER COLUMN "userUid" SET DATA TYPE text ;

ALTER TABLE "public"."Dictionary" ADD FOREIGN KEY ("authorId")REFERENCES "public"."User"("uid") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "public"."Profile" ADD FOREIGN KEY ("userId")REFERENCES "public"."User"("uid") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "public"."UserWordNotation" ADD FOREIGN KEY ("userUid")REFERENCES "public"."User"("uid") ON DELETE SET NULL  ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200711164257-init..20200711164901-init
--- datamodel.dml
+++ datamodel.dml
@@ -2,9 +2,9 @@
 // learn more about it in the docs: https://pris.ly/d/prisma-schema
 datasource postgresql {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 generator client {
   provider = "prisma-client-js"
@@ -46,9 +46,9 @@
   avatar      String?
   url         String  @unique
   // region author
   author      User    @relation(fields: [authorId], references: [uid], name: "author")
-  authorId    Int
+  authorId    String
   @@index([authorId], name: "authorId")
   // endregion author
   words      WordMeta[]
   sharedWith User[]     @relation("sharedWith")
@@ -59,9 +59,9 @@
   id     Int     @default(autoincrement()) @id
   bio    String?
   avatar String?
   user   User    @relation(fields: [userId], references: [uid])
-  userId Int     @unique
+  userId String     @unique
 }
 enum NotationType {
   DONT_KNOW
@@ -73,9 +73,9 @@
   word    WordMeta     @relation(fields: [wordId], references: [token], name: "word")
   wordId  String
   type    NotationType
   User    User?        @relation(fields: [userUid], references: [uid])
-  userUid Int?
+  userUid String?
 }
 enum UserType {
   STUDENT
@@ -84,9 +84,9 @@
   TUTOR
 }
 model User {
-  uid                Int                @id
+  uid                String                @id
   email              String             @unique
   name               String
   type               UserType
   profile            Profile?
```


